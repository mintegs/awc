import fetcher from '@/lib/fetcher'
import { Metadata } from 'next'
import { cookies } from 'next/headers'

export const metadata: Metadata = {
  title: 'home page',
  description: 'Generated by create next app',
}

async function getUser(cookie: string) {
  const { data } = await fetcher().get('/user', {
    headers: {
      Authorization: cookie,
    },
  })
  return data
}

export default async function Home() {
  const cookieStore = cookies()
  const theme = cookieStore.get('mintegs_token')
  console.log('theme', theme)
  const user = await getUser(theme ? theme?.value : '')

  return (
    <div>
      <h1>home page</h1>
      <p>{JSON.stringify(theme)}</p>
      <p className='text-red-500'>{JSON.stringify(user)}</p>
    </div>
  )
}
